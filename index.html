<!DOCTYPE html>
<html lang="lv">
<head>
<meta charset="UTF-8">
<title>Izdegšana un miegs</title>
<style>
body {
    margin: 0;
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    font-family: Helvetica, Arial, sans-serif;
    background-color: #ffffff;
    opacity: 0;
    animation: fadeIn 1.2s ease forwards;
}
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}
.container { max-width: 900px; padding: 40px 20px; text-align: center; }
h1, h2 { font-weight: 700; margin-bottom: 40px; }
h1 { font-size: 60px; } h2 { font-size: 32px; }
p { max-width: 700px; margin: 0 auto 40px; font-size: 20px; line-height: 1.6; }
.buttons { display: flex; justify-content: center; gap: 40px; flex-wrap: wrap; }
.button { padding: 14px 36px; border: 2px solid #000000; background: #c7e2ff; cursor: pointer; font-size: 20px; font-weight: 100; }
.button:hover { background-color: #8cc1f9; }
.view { display: none; } .view.active { display: block; }
label { display: block; text-align: left; max-width: 700px; margin: 6px auto; }
</style>
</head>
<body>
<div class="container">

<div id="home" class="view active">
<h1>Skolotāju miega kvalitātes un<br> izdegšanas līmeņa saistība</h1>
<p>Šinī mājaslapā ir pieejami divi plaši izmantoti testi tulkoti latviešu valodā.<br> Miega kvalitātes tests (Pitsburgas miega kvalitātes indekss) un izdegšanas līmeņa tests (Kopenhāgenas izdegšanas indekss). Ar šo testu palīdzību
uzzināsiet savu miega kvalitāti un izdegšanas līmeni un
nākamos soļus to uzlabošanai. Uzpiežot uz apakšā dotajām nodaļām uzzināsiet vairāk par vienu no testiem, spēsiet izpildīt to un dabūt papildu informāciju.</p>
<div class="buttons">
<button class="button" onclick="switchView('about')">Par zinātnisko darbu</button>
<button class="button" onclick="switchView('psqi')">Miega kvalitātes tests</button>
<button class="button" onclick="switchView('cbi')">Izdegšanas līmeņa tests</button>
</div>
</div>

<div id="about" class="view">
<h2>Par darbu</h2>
<p>Mājaslapas mērķis ir, lai Latvijas pedagogi spētu uzzināt savu profesionālās izdegšanas līmeni un miega kvalitāti, kā arī to saistību.<br><br>
Mājaslapā ir 2 testi: Pitsburgas miega kvalitātes indekss (PSQI), Kopenhāgenas izdegšanas indekss (CBI).<br><br>
Testi ir anonīmi un var tikt veikti vairākkārt. Testu beigās autore dalās ar informāciju, kā iegūt palīdzību ar izdegšanas sindromu vai nekvalitatīvu miegu.<br><br>
Šinī nodaļā var uzzināt vairāk par miega kvalitāti un izdegšanas līmeņa saistību, kas noriet no zinātniskās pētniecības darba.
</p>
<button class="button" onclick="switchView('home')">Atpakaļ</button>
</div>

<div id="psqi" class="view">
<h2>Pitsburgas miega kvalitātes indekss (PSQI)</h2>
<p>Šie jautājumi ir saistīti ar jūsu ierastajiem gulēšanas paradumiem tikai pēdējā mēneša (pēdējo 30 dienu) laikā. Jums jānorāda visprecīzākā atbilde attiecībā uz lielāko daļu dienu un nakšu pēdējā mēnesī.<br> Lūdzu, atbildiet uz visiem jautājumiem.</p>
<form id="psqiForm">

<p><strong>1. Cikos Jūs parasti dodaties gulēt?</strong></p>
<input type="time" name="q1" required>
<p><strong>2. Cik minūtes parasti nepieciešamas, lai aizmigtu?</strong></p>
<input type="number" name="q2" min="0" required> minūtes
<p><strong>3. Cikos Jūs parasti pamostaties?</strong></p>
<input type="time" name="q3" required>
<p><strong>4. Cik stundas Jūs parasti guļat naktī?</strong></p>
<input type="number" name="q4" min="0" max="24" step="0.1" required> stundas

<p><strong>5. Cik bieži pēdējā mēneša laikā Jums bija ...</strong></p>
<p>a) Grūtības aizmigt</p>
<select name="q5a" required>
<option value="0">Nekad</option>
<option value="1">Retāk nekā 1 reizi nedēļā</option>
<option value="2">1–2 reizes nedēļā</option>
<option value="3">3 vai vairāk reizes nedēļā</option>
</select>
<p>b) Pamošanās nakts laikā</p>
<select name="q5b" required>
<option value="0">Nekad</option>
<option value="1">Retāk nekā 1 reizi nedēļā</option>
<option value="2">1–2 reizes nedēļā</option>
<option value="3">3 vai vairāk reizes nedēļā</option>
</select>
<p>c) Pamošanās agrāk nekā plānots</p>
<select name="q5c" required>
<option value="0">Nekad</option>
<option value="1">Retāk nekā 1 reizi nedēļā</option>
<option value="2">1–2 reizes nedēļā</option>
<option value="3">3 vai vairāk reizes nedēļā</option>
</select>

<p><strong>6. Kā Jūs kopumā vērtējat savu miega kvalitāti?</strong></p>
<label><input type="radio" name="q6" value="0" required> Ļoti laba</label><br>
<label><input type="radio" name="q6" value="1"> Diezgan laba</label><br>
<label><input type="radio" name="q6" value="2"> Diezgan slikta</label><br>
<label><input type="radio" name="q6" value="3"> Ļoti slikta</label>

<p><strong>7. Cik bieži Jūs lietojāt miega zāles?</strong></p>
<select name="q7" required>
<option value="0">Nekad</option>
<option value="1">Retāk nekā 1 reizi nedēļā</option>
<option value="2">1–2 reizes nedēļā</option>
<option value="3">3 vai vairāk reizes nedēļā</option>
</select>

<p><strong>8. Cik bieži Jums bija grūtības palikt nomodā dienas laikā?</strong></p>
<select name="q8" required>
<option value="0">Nekad</option>
<option value="1">Retāk nekā 1 reizi nedēļā</option>
<option value="2">1–2 reizes nedēļā</option>
<option value="3">3 vai vairāk reizes nedēļā</option>
</select>

<p><strong>9. Cik lielā mērā miegainība traucēja Jūsu ikdienas darbībām?</strong></p>
<label><input type="radio" name="q9" value="0" required> Nemaz</label><br>
<label><input type="radio" name="q9" value="1"> Nedaudz</label><br>
<label><input type="radio" name="q9" value="2"> Vidēji</label><br>
<label><input type="radio" name="q9" value="3"> Ļoti</label>
<br>

<div class="buttons" style="margin-top:40px;">
<button type="button" class="button" onclick="calculatePSQI()">Aprēķināt</button>
<button type="button" class="button" onclick="switchView('home')">Atpakaļ</button>
</div>

<p id="psqiResult" style="font-weight:600;; margin-top:40px;"></p>
<div id="psqiArrow" style="display:none; text-align:center; margin-top:10px; font-size:20px;">
    ↓
</div>
<div id="psqiHelp" style="display:none; max-width:700px; margin:25px auto 0; text-align:left; font-size:20px; line-height:1.5;">
    <strong>Ko darīt, ja miega kvalitāte ir vidēja vai slikta?</strong>
    <p>
        Ja Jūsu PSQI rezultāts norāda uz vidēju vai sliktu miega kvalitāti,
        ieteicams pievērst uzmanību miega režīmam, ikdienas stresam un
        atpūtas līdzsvaram.
    </p>
    <p>
        Ja miega traucējumi saglabājas ilgstoši, apsveriet iespēju vērsties pie
        ģimenes ārsta vai miega speciālista.
    </p>
    <p>
        Papildu informāciju un atbalstu Latvijā var saņemt arī:
        <br>• pie ģimenes ārsta
        <br>• pie psihologa vai psihoterapeita
    </p>
</div>

</form>
</div>
<div id="cbi" class="view">
    <h2>Kopenhāgenas izdegšanas indekss (CBI)</h2>
    <p>
        Kopenhāgenas izdegšanas indekss (CBI) palīdz noteikt profesionālās izdegšanas līmeni.
        Rezultāts tiek aprēķināts kā vidējais rādītājs procentos. Lūdzu, atbildiet uz visiem jautājumiem.
    </p>

    <form id="cbiForm">
        <script type="text/template" id="cbiAnswers">
            <label><input type="radio" value="0" required> Nekad / gandrīz nekad (0%)</label>
            <label><input type="radio" value="25"> Reti (25%)</label>
            <label><input type="radio" value="50"> Dažreiz (50%)</label>
            <label><input type="radio" value="75"> Bieži (75%)</label>
            <label><input type="radio" value="100"> Vienmēr (100%)</label>
        </script>

        <div class="cbi-question">
            <p><strong>1. Cik bieži Jūs jūtaties izmocīts?</strong></p>
            <div class="answers" data-name="q1"></div>
        </div>

        <div class="cbi-question">
            <p><strong>2. Cik bieži Jūs esat fiziski izsmelts?</strong></p>
            <div class="answers" data-name="q2"></div>
        </div>

        <div class="cbi-question">
            <p><strong>3. Cik bieži Jūs esat emocionāli izsmelts?</strong></p>
            <div class="answers" data-name="q3"></div>
        </div>

        <div class="cbi-question">
            <p><strong>4. Cik bieži domājat: "Es to vairs nevaru izturēt?"</strong></p>
            <div class="answers" data-name="q4"></div>
        </div>

        <div class="cbi-question">
            <p><strong>5. Cik bieži jūtaties noguris?</strong></p>
            <div class="answers" data-name="q5"></div>
        </div>

        <div class="cbi-question">
            <p><strong>6. Cik bieži Jūs jūtaties vājš un uzņēmīgs pret slimībām?</strong></p>
            <div class="answers" data-name="q6"></div>
        </div>

        <div class="cbi-question">
            <p><strong>7. Vai darba dienas beigās Jūs jūtaties noguris?</strong></p>
            <div class="answers" data-name="q7"></div>
        </div>

        <div class="cbi-question">
            <p><strong>8. Vai no rīta Jūs jūtaties izsmelts, domājot par kārtējo darba dienu?</strong></p>
            <div class="answers" data-name="q8"></div>
        </div>

        <div class="cbi-question">
            <p><strong>9. Vai jums šķiet, ka katra darba stunda ir nogurdinoša?</strong></p>
            <div class="answers" data-name="q9"></div>
        </div>

        <div class="cbi-question">
            <p><strong>10. Vai jums ir pietiekami daudz enerģijas ģimenei un draugiem brīvajā laikā?</strong></p>
            <div class="answers" data-name="q10"></div>
        </div>

        <div class="cbi-question">
            <p><strong>11. Vai jūsu darbs ir Jūs emocionāli izsmeļ?</strong></p>
            <div class="answers" data-name="q11"></div>
        </div>

        <div class="cbi-question">
            <p><strong>12. Vai jūsu darbs jūs aizkaitina?</strong></p>
            <div class="answers" data-name="q12"></div>
        </div>

        <div class="cbi-question">
            <p><strong>13. Vai jūs jūtaties izdedzis / izdegusi?</strong></p>
            <div class="answers" data-name="q13"></div>
        </div>

        <div class="cbi-question">
            <p><strong>14. Vai darbs ar skolēniem sagādā grūtības?</strong></p>
            <div class="answers" data-name="q14"></div>
        </div>

        <div class="cbi-question">
            <p><strong>15. Vai darbā ar skolēniem jūs jūtat enerģijas izsīkumu?</strong></p>
            <div class="answers" data-name="q15"></div>
        </div>

        <div class="cbi-question">
            <p><strong>16. Vai darbs ar skolēniem jums sagādā vilšanos?</strong></p>
            <div class="answers" data-name="q16"></div>
        </div>

        <div class="cbi-question">
            <p><strong>17. Vai jūtat, ka, strādājot ar skolēniem, dodat vairāk nekā saņemat pretī?</strong></p>
            <div class="answers" data-name="q17"></div>
        </div>

        <div class="cbi-question">
            <p><strong>18. Vai jūs esat noguris no darba ar skolēniem?</strong></p>
            <div class="answers" data-name="q18"></div>
        </div>

        <div class="cbi-question">
            <p><strong>19. Vai jūs dažreiz domājat, cik ilgi vēl spēsiet turpināt strādāt ar skolēniem?</strong></p>
            <div class="answers" data-name="q19"></div>
        </div>

        <div class="buttons" style="margin-top:40px;">
            <button type="button" class="button" onclick="calculateCBI()">Aprēķināt</button>
            <button type="button" class="button" onclick="switchView('home')">Atpakaļ</button>
        </div>
    </form>

    <p id="cbiResult" style="font-weight:600; margin-top:25px;"></p>
    <div id="cbiArrow" style="display:none; text-align:center; margin-top:10px; font-size:20px;">
        ↓
    </div>
    <div id="cbiHelp" style="display:none; max-width:700px; margin:25px auto 0; text-align:left; font-size:20px; line-height:1.5;">
        <strong>Ko darīt, ja izdegšanas līmenis ir paaugstināts?</strong>
        <p>
            Ja Jūsu CBI rezultāts norāda uz augstu vai ļoti augstu izdegšanas līmeni,
            tas var liecināt par ilgstošu emocionālu un fizisku pārslodzi.
        </p>
        <p>
            Ieteicams savlaicīgi meklēt atbalstu un pārrunāt savu pašsajūtu ar
            speciālistu.
        </p>
        <p>
            Palīdzību Latvijā iespējams saņemt:
            <br>• pie ģimenes ārsta
            <br>• pie psihologa vai psihoterapeita
            <br>• izmantojot pedagogiem paredzētus atbalsta resursus
        </p>
    </div>

<script>
function switchView(viewId) {
    document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
    const target = document.getElementById(viewId);
    if(target) target.classList.add('active');
}

function calculatePSQI() {
    const form = document.getElementById('psqiForm');
    const fd = new FormData(form);

    const requiredFields = [
        'q1','q2','q3','q4','q5a','q5b','q5c','q6','q7','q8','q9'
    ];

    for (let field of requiredFields) {
        if (!fd.get(field)) {
            alert("Lūdzu, atbildiet uz visiem jautājumiem.");
            return;
        }
    }
    document.getElementById('psqiArrow').style.display = 'block';
    document.getElementById('psqiHelp').style.display = 'block';

//Subjective sleep quality
    const C1 = parseInt(fd.get('q6')) || 0;

//Sleep latency
    let sleepLatencyScore = 0;
    const q2 = parseInt(fd.get('q2')) || 0;
    const q5a = parseInt(fd.get('q5a')) || 0;
    if(q2 <= 15) sleepLatencyScore = 0;
    else if(q2 <= 30) sleepLatencyScore = 1;
    else if(q2 <= 60) sleepLatencyScore = 2;
    else sleepLatencyScore = 3;
    sleepLatencyScore += q5a;
    if(sleepLatencyScore > 3) sleepLatencyScore = 3;
    const C2 = sleepLatencyScore;

//Sleep duration
    const hours = parseFloat(fd.get('q4')) || 0;
    let C3 = 0;
    if(hours >= 7) C3 = 0;
    else if(hours >= 6) C3 = 1;
    else if(hours >= 5) C3 = 2;
    else C3 = 3;

//Habitual sleep efficiency
    const q1 = fd.get('q1');
    const q3 = fd.get('q3');
    let efficiency = 0;
    if(q1 && q3 && hours>0) {
        const [bh, bm] = q1.split(':').map(Number);
        const [wh, wm] = q3.split(':').map(Number);
        let timeInBed = (wh + wm/60) - (bh + bm/60);
        if(timeInBed < 0) timeInBed += 24;
        let percent = (hours / timeInBed)*100;
        if(percent >= 85) efficiency = 0;
        else if(percent >= 75) efficiency = 1;
        else if(percent >= 65) efficiency = 2;
        else efficiency = 3;
    }
    const C4 = efficiency;

//Sleep disturbances
    let C5 = (parseInt(fd.get('q5b')) || 0) + (parseInt(fd.get('q5c')) || 0);
    if(C5 > 3) C5 = 3;

//Use of sleeping medications
    const C6 = parseInt(fd.get('q7')) || 0;

//Daytime dysfunction
    let C7 = parseInt(fd.get('q8')) + parseInt(fd.get('q9'));
    if(C7 > 3) C7 = 3;

    const globalScore = C1 + C2 + C3 + C4 + C5 + C6 + C7;

    let resultText = `Jūsu PSQI rezultāts: ${globalScore} / 21. `;
    if(globalScore <= 5) resultText += "Miega kvalitāte ir laba.";
    else if(globalScore <= 10) resultText += "Miega kvalitāte ir vidēja. (Papildinformāciju skatīt zemāk)";
    else resultText += "Miega kvalitāte ir slikta. (Papildinformāciju skatīt zemāk)";

    document.getElementById('psqiResult').textContent = resultText;
}
</script>

<script>
document.querySelectorAll('.answers').forEach(container => {
    const name = container.dataset.name;
    const template = document.getElementById('cbiAnswers').innerHTML;
    container.innerHTML = template.replace(/value="/g, `name="${name}" value="`);
});

function calculateCBI() {
    const form = document.getElementById('cbiForm');
    const inputs = form.querySelectorAll('input[type="radio"]:checked');

    if (inputs.length < 19) {
        alert("Lūdzu, atbildiet uz visiem jautājumiem.");
        return;
    }

    let sum = 0;
    inputs.forEach(input => sum += parseInt(input.value));

    const average = Math.round(sum / inputs.length);

    let interpretation = "";
    if (average < 25) interpretation = "Zems izdegšanas līmenis.";
    else if (average < 50) interpretation = "Vidējs izdegšanas līmenis.";
    else if (average < 75) interpretation = "Augsts izdegšanas līmenis. (Papildinformāciju skatīt zemāk)";
    else interpretation = "Ļoti augsts izdegšanas līmenis. (Papildinformāciju skatīt zemāk)";

    document.getElementById('cbiResult').textContent =
        `Jūsu CBI rezultāts: ${average}%. ${interpretation}`;
    document.getElementById('cbiArrow').style.display = 'block';
    document.getElementById('cbiHelp').style.display = 'block';

}
</script>

</body>
</html>
